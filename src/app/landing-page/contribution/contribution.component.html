<div class="container">
  <div class="card">
    <div class="card-header">
      <h1 class="title">Contribution</h1>

      <nav class="steps-container">
        <div
          class="step-item"
          [class.active]="currentStep === 1"
          (click)="setStep(1)"
        >
          <div class="step-number">1</div>
          <div class="step-text">Why Contribute?</div>
        </div>

        <div class="step-divider"></div>

        <div
          class="step-item"
          [class.active]="currentStep === 2"
          (click)="setStep(2)"
        >
          <div class="step-number">2</div>
          <div class="step-text">Choose Payment</div>
        </div>
      </nav>
    </div>

    <div class="card-body">
      <div class="step-content" *ngIf="currentStep === 1">
        <h2 class="section-title">Details</h2>
        <p class="emphasis-text">Please Read Carefully.</p>

        <div class="text-content">
          <p>
            The application is designed to adapt to diverse oxalate-related
            needs, providing features such as meal visibility with detailed
            oxalate content to ensure inclusivity for all users.
          </p>
          <p>
            Contributors can expand on this foundation by developing innovative
            features that enhance functionality, improve user experience, and
            address a broader range of oxalate management challenges.
          </p>
          <p>
            By contributing, you help maintain and improve the application while
            creating a reliable, community-driven resource for oxalate tracking.
          </p>
        </div>

        <button class="button-primary" (click)="setStep(2)">
          Continue to Payment
        </button>
      </div>

      <div class="step-content" *ngIf="currentStep === 2">
        <h2 class="section-title">Choose Payment Method</h2>
        <p>Select your preferred payment method to contribute:</p>

        <div class="payment-options">
          <button
            class="payment-button venmo-button"
            (click)="openPaymentModal('venmo')"
          >
            <svg class="payment-icon" viewBox="0 0 24 24" fill="none">
              <path
                d="M20 12C20 16.4183 16.4183 20 12 20C7.58172 20 4 16.4183 4 12C4 7.58172 7.58172 4 12 4C16.4183 4 20 7.58172 20 12Z"
                stroke="currentColor"
                stroke-width="2"
              />
              <path
                d="M14 8L12 16M10 8L8 16"
                stroke="currentColor"
                stroke-width="2"
              />
            </svg>
            <span>Contribute with Venmo</span>
          </button>

          <button
            class="payment-button paypal-button"
            (click)="openPaymentModal('paypal')"
          >
            <svg class="payment-icon" viewBox="0 0 24 24" fill="none">
              <path
                d="M19.5 8.5C19.5 11.5 17 14 14 14H11L10 19H7L8.5 8.5H14C17 8.5 19.5 5.5 19.5 8.5Z"
                stroke="currentColor"
                stroke-width="2"
              />
              <path
                d="M16.5 11.5C16.5 14.5 14 17 11 17H8L7 22H4L5.5 11.5H11C14 11.5 16.5 8.5 16.5 11.5Z"
                stroke="currentColor"
                stroke-width="2"
              />
            </svg>
            <span>Contribute with PayPal</span>
          </button>
          <button
            class="payment-button cashapp-button"
            (click)="openPaymentModal('cashapp')"
          >
            <svg class="payment-icon" viewBox="0 0 24 24" fill="none">
              <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"
                stroke="currentColor"
                stroke-width="2"
              />
              <path d="M8 12h8m-4-4v8" stroke="currentColor" stroke-width="2" />
            </svg>
            <span>Contribute with CashApp</span>
          </button>
          <button
            class="payment-button zelle-button"
            (click)="openPaymentModal('zelle')"
          >
            <svg class="payment-icon" viewBox="0 0 24 24" fill="none">
              <path
                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2z"
                stroke="currentColor"
                stroke-width="2"
              />
              <path d="M8 12h8m-4-4v8" stroke="currentColor" stroke-width="2" />
            </svg>
            <span>Contribute with Zelle</span>
          </button>
        </div>

        <button class="button-secondary" (click)="setStep(1)">
          Back to Details
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal-backdrop" *ngIf="showModal" (click)="closeModal()">
  <div class="modal-box" (click)="$event.stopPropagation()">
    <button class="modal-close-button" (click)="closeModal()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path
          d="M18 6L6 18M6 6l12 12"
          stroke-width="2"
          stroke-linecap="round"
        />
      </svg>
    </button>

    <h2 class="modal-title">
      Scan {{ selectedPaymentMethod | titlecase }} QR Code
    </h2>

    <div class="qr-wrapper">
      <img
        [src]="getQRCodeSource()"
        [alt]="selectedPaymentMethod + ' QR Code'"
        class="qr-image"
      />
    </div>

    <div class="payment-links" *ngIf="selectedPaymentMethod">
      <a
        *ngIf="selectedPaymentMethod === 'venmo'"
        href="https://venmo.com/u/JoseCarlos-AlarconChacon"
        target="_blank"
        rel="noopener noreferrer"
        class="payment-link"
      >
        Contribute with Venmo
      </a>
      <a
        *ngIf="selectedPaymentMethod === 'paypal'"
        href="https://www.paypal.com/paypalme/JAlarconChacon/10"
        target="_blank"
        rel="noopener noreferrer"
        class="payment-link"
      >
        Contribute with PayPal
      </a>
      <a
        *ngIf="selectedPaymentMethod === 'cashapp'"
        href="https://cash.app/$josecarlo"
        target="_blank"
        rel="noopener noreferrer"
        class="payment-link"
      >
        Contribute with Cash App
      </a>
      <a
        *ngIf="selectedPaymentMethod === 'zelle'"
        href=""
        class="payment-link"
        target="_blank"
        rel="noopener noreferrer"
      >
        Open Zelle App to Contribute
      </a>
    </div>

    <button class="button-primary" (click)="closeModal()">Close</button>
  </div>
</div>

<main class="main-container">
  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <div class="hero-top">
          <div class="hero-img">
            <img
              class="hero-image"
              src="../../assets/app-logo/landing-logo1.png"
              alt="Oxalate Home Preview"
            />
          </div>
          <div class="hero-text">
            <h1>What are Oxalates?</h1>
            <p>
              Oxalates are naturally occurring compounds found in plants and
              sometimes produced within the body. In excess, oxalates are most
              well known for their association with kidney stones, but they can
              also lead to a myriad of other health problems in sensitive
              individuals.
            </p>
            <!-- Search Section - Moved inside hero-text for better integration -->
            <div class="search-container" *ngIf="!showSearchResults">
              <div class="search-wrapper">
                <app-search-input
                  [searchQuery]="searchQuery"
                  (searchQueryChange)="onSearchQueryChange($event)"
                  (clearSearch)="onClearSearch()"
                ></app-search-input>
              </div>
            </div>
          </div>
        </div>

        <!-- Search Results Section -->
        <div
          *ngIf="showSearchResults && searchQuery"
          class="search-results-container"
        >
          <!-- Add search input inside modal -->
          <div class="modal-search-wrapper">
            <app-search-input
              #modalSearchInput
              [searchQuery]="searchQuery"
              (searchQueryChange)="onSearchQueryChange($event)"
              (clearSearch)="onClearSearch()"
            ></app-search-input>
          </div>

          <div *ngIf="isLoading" class="loading-container">
            <div class="loading-spinner"></div>
            <p>Loading results...</p>
          </div>

          <div *ngIf="!isLoading" class="search-results">
            <div class="results-header">
              <div class="results-stats">
                {{ searchResults.length }} results found for "{{ searchQuery }}"
              </div>
              <div class="close-results">
                <button (click)="closeSearchResults()" title="Close Results">
                  Ã—
                </button>
              </div>
            </div>

            <div *ngIf="searchResults.length === 0" class="no-results">
              <i class="fas fa-search"></i>
              <h3>No results found</h3>
              <p>Try a different search term or check spelling</p>
            </div>

            <div class="card-container list-view">
              <div
                *ngFor="let result of searchResults"
                class="search-result-card"
                (click)="viewOxalateDetails(result)"
              >
                <div class="result-snippets">
                  <h3 class="result-title">{{ result.item }}</h3>
                  <p class="result-snippet" *ngIf="result.serving_size">
                    Serving Size: {{ result.serving_size }}
                  </p>
                </div>
                <div class="result-snippets">
                  <p class="result-snippet category">
                    Category: {{ result.category }}
                  </p>
                  <p class="result-snippet">
                    Oxalate Per Serving: {{ result.calc_oxalate_per_serving }}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Resources Section -->
  <section class="section resources-section">
    <div class="container">
      <app-resources></app-resources>
    </div>
  </section>

  <!-- Food Categories Section -->
  <section class="section categories-section">
    <div class="container">
      <app-food-by-category></app-food-by-category>
    </div>
  </section>

  <!-- Managing Oxalate Section -->
  <section class="section managing-section">
    <div class="container">
      <app-managing-oxalate></app-managing-oxalate>
    </div>
  </section>

  <!-- Footer Section -->
  <section class="footer-section">
    <app-footer></app-footer>
  </section>
</main>

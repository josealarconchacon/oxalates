<div class="change-password-container">
  <h2>Change Password</h2>
  <form [formGroup]="passwordForm" (ngSubmit)="onChangePassword()">
    <div class="form-group">
      <label for="currentPassword">Current Password</label>
      <input
        type="password"
        id="currentPassword"
        formControlName="currentPassword"
        class="form-control"
        [class.is-invalid]="
          passwordForm.get('currentPassword')?.invalid &&
          passwordForm.get('currentPassword')?.touched
        "
      />
      <div
        *ngIf="
          passwordForm.get('currentPassword')?.invalid &&
          passwordForm.get('currentPassword')?.touched
        "
        class="error-message"
      >
        Current password is required.
      </div>
    </div>
    <div class="form-group">
      <label for="newPassword">New Password</label>
      <input
        type="password"
        id="newPassword"
        formControlName="newPassword"
        class="form-control"
        [class.is-invalid]="
          passwordForm.get('newPassword')?.invalid &&
          passwordForm.get('newPassword')?.touched
        "
      />
      <div
        *ngIf="
          passwordForm.get('newPassword')?.invalid &&
          passwordForm.get('newPassword')?.touched
        "
        class="error-message"
      >
        New password is required and must be at least 6 characters long.
      </div>
    </div>
    <div class="form-group">
      <label for="confirmPassword">Confirm New Password</label>
      <input
        type="password"
        id="confirmPassword"
        formControlName="confirmPassword"
        class="form-control"
        [class.is-invalid]="
          passwordForm.get('confirmPassword')?.invalid &&
          passwordForm.get('confirmPassword')?.touched
        "
      />
      <div
        *ngIf="
          passwordForm.get('confirmPassword')?.invalid &&
          passwordForm.get('confirmPassword')?.touched
        "
        class="error-message"
      >
        Confirm password is required and must match the new password.
      </div>
    </div>
    <div class="form-actions">
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="passwordForm.invalid || isSubmitting"
      >
        <span *ngIf="isSubmitting">Saving...</span>
        <span *ngIf="!isSubmitting">Save</span>
      </button>
      <button type="button" class="btn btn-secondary" (click)="onClose()">
        Cancel
      </button>
    </div>
  </form>
</div>

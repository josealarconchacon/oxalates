<div class="results-container">
  <div class="title-container">
    <h2 class="title">Daily Oxalate Breakdown</h2>
    <button
      class="share-icon"
      (click)="openShareMenu()"
      [disabled]="!hasFoodItems()"
    >
      <i class="fas fa-share-alt"></i>
    </button>
  </div>

  <div class="content-container">
    <div class="total-oxalates">
      <span>Total Oxalate: {{ totalOxalate | number : "1.1-1" }} mg</span>
      <span
        >Total Soluble Oxalate:
        {{ totalSolubleOxalate | number : "1.1-1" }} mg</span
      >
    </div>

    <div class="indicators-and-totals">
      <div class="oxalate-level-indicators">
        <div class="bar-chart">
          <!-- Green section (0-50mg) -->
          <div
            class="bar green"
            [style.width]="getGreenWidth()"
            [style.opacity]="getGreenOpacity()"
          ></div>
          <!-- Yellow section (50-350mg) -->
          <div
            class="bar yellow"
            [style.width]="getYellowWidth()"
            [style.opacity]="getYellowOpacity()"
          ></div>
          <!-- Red section (350-500mg) -->
          <div
            class="bar red"
            [style.width]="getRedWidth()"
            [style.opacity]="getRedOpacity()"
          ></div>
          <!-- Dark Red section (500-1000mg) -->
          <div
            class="bar dark-red"
            [style.width]="getDarkRedWidth()"
            [style.opacity]="getDarkRedOpacity()"
          ></div>
        </div>
        <span class="indicator-label"
          >Oxalate Level: {{ getOxalateLevel(totalOxalate) }}</span
        >
      </div>
    </div>
  </div>
</div>

<app-share-menu
  *ngIf="shareMenuVisible"
  [dailyMeals]="mealItems"
  [dailyTotal]="{
    totalOxalate: totalOxalate,
    totalSolubleOxalate: totalSolubleOxalate
  }"
  (close)="closeShareMenu()"
></app-share-menu>

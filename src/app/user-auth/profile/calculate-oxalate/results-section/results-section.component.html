<div class="results-container" [ngClass]="{ 'dark-theme': isDarkTheme }">
  <div class="title-container">
    <h2 class="title">Daily Oxalate Breakdown</h2>
    <button
      class="share-icon"
      (click)="openShareMenu()"
      [disabled]="!hasFoodItems()"
      [attr.aria-label]="'Share daily oxalate breakdown'"
    >
      <i class="fas fa-share-alt"></i>
    </button>
  </div>

  <div class="content-container">
    <div class="total-oxalates">
      <span>Total Oxalate: {{ totalOxalate | number : "1.1-1" }} mg</span>
      <span
        >Total Soluble Oxalate:
        {{ totalSolubleOxalate | number : "1.1-1" }} mg</span
      >
    </div>

    <!-- <div class="indicators-and-totals">
      <div class="oxalate-level-indicators">
        <div class="bar-chart">
          <div
            class="bar green"
            [style.width]="getGreenWidth()"
            [style.opacity]="getGreenOpacity()"
            [attr.aria-label]="'Low oxalate range (0-50mg)'"
          ></div>
          <div
            class="bar yellow"
            [style.width]="getYellowWidth()"
            [style.opacity]="getYellowOpacity()"
            [attr.aria-label]="'Medium oxalate range (50-350mg)'"
          ></div>
          <div
            class="bar red"
            [style.width]="getRedWidth()"
            [style.opacity]="getRedOpacity()"
            [attr.aria-label]="'High oxalate range (350-500mg)'"
          ></div>
          <div
            class="bar dark-red"
            [style.width]="getDarkRedWidth()"
            [style.opacity]="getDarkRedOpacity()"
            [attr.aria-label]="'Very high oxalate range (500-1000mg)'"
          ></div>
        </div>
        <span class="indicator-label"
          >Oxalate Level: {{ getOxalateLevel(totalOxalate) }}</span
        >
      </div>
    </div> -->
  </div>
</div>

<app-share-menu
  *ngIf="shareMenuVisible"
  [dailyMeals]="mealItems"
  [dailyTotal]="{
    totalOxalate: totalOxalate,
    totalSolubleOxalate: totalSolubleOxalate
  }"
  (close)="closeShareMenu()"
></app-share-menu>
